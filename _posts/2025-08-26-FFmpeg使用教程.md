---
title: FFmpeg
date: 2025-08-26
---

## 下载安装


### 1\. 下载 FFmpeg 安装包

1.打开 [Dpwnload FFmpeg 官网](https://ffmpeg.org/download.html)，选择安装包`Windows builds from gyan.dev`

2.下滑找到`release bulids`部分，选择`ffmpeg-git-full.7z`或者直接访问[ffmpeg-git-full](https://www.gyan.dev/ffmpeg/builds/ffmpeg-git-full.7z)

3.下载完成后，解压缩得到 FFmpeg 文件夹。



### 2\. 配置环境变量

为了方便在命令行中直接调用 FFmpeg，需要将其添加到系统的环境变量中。

解压完毕后，找到解压目录下的 bin 文件夹，复制其完整路径。接着，右键点击 “此电脑”，选择 “属性”，在弹出窗口左侧点击 “高级系统设置”，进入 “系统属性” 窗口后点击下方的 “环境变量” 按钮。在 “系统变量” 区域找到名为 “Path” 的变量，点击 “编辑”，于弹出的编辑窗口点击 “新建”，把之前复制的 bin 文件夹路径粘贴进去，一路点击 “确定” 保存设置。


> **注意**：确保路径准确，以便系统能正确找到 FFmpeg 文件。

* * *

### 3\. 测试安装是否成功

1.按 `Win + R` 键，输入 `cmd` 打开命令行窗口。

2.在命令行中输入以下命令查看 FFmpeg 版本：`ffmpeg -version`

3.如果正确显示 FFmpeg 版本号和相关信息，说明安装成功。

## 基本使用

#### 6\. 基本语法详解

> 理解命令行结构与常见参数是用好 FFmpeg 的关键。本节从最基础的 `命令 + 参数` 结构入手，逐步剖析常见参数的含义与用法。

##### 6.1 命令行结构

一个完整的 FFmpeg 命令行大致分为以下几个部分：

   ` ffmpeg [全局选项] -i <输入文件/流> [针对输入的过滤与参数] [输出选项] <输出文件/流>`

*   `ffmpeg`：可执行程序，直接调用。
*   `[全局选项]`：影响整个 FFmpeg 进程的参数，如日志级别（`-loglevel`）、线程数（`-threads`）等。
*   `-i <输入>`：指定输入文件、URL 或设备。 如果需要多个输入，可多次使用 `-i`。
*   `[针对输入的过滤与参数]`：可以对输入进行一些局部参数调整，比如输入裁剪、开始偏移、抓取帧率等。
*   `[输出选项]`：包括输出文件格式、编解码器、码率、分辨率、帧率等设置。
*   `<输出>`：输出到本地文件、管道、网络推流地址等。

示例框架：

    ffmpeg -loglevel error -i input.mp4 -c:v libx264 -b:v 800k -s 1280x720 output.mp4

##### 6.2 常见参数详解

下面从最常见的输入/输出、编解码器、质量控制、分辨率帧率等维度逐一说明。

###### 6.2.1 输入与输出文件（`-i`、输出路径）


###### 6.2.2 编解码器参数（`-c:v`、`-c:a`）

*   `-c:v <视频编码器>`：指定视频编码器。常见选项：
    *   `libx264`：H.264 编码器，高效且兼容性好。
    *   `libx265`：H.265 编码器，压缩效率高，但兼容性稍差。
    *   `mpeg4`：旧版 MPEG-4 编码（`.mp4` 容器）。
    *   `copy`：流复制（不重新编码）。
*   `-c:a <音频编码器>`：指定音频编码器。常见选项：
    *   `aac`：AAC 编码（内置或外部库）。
    *   `libmp3lame`：MP3 编码。
    *   `copy`：流复制。


   ` ffmpeg -i input.mkv -c:v libx264 -c:a aac output.mp4`

该命令将输入视频转为 H.264 视频流、AAC 音频流，输出 MP4 容器。

###### 6.2.3 码率与质量控制（`-b:v`、`-crf`）

*   `-b:v <视频码率>`：设置输出视频的目标码率（比特率）。
    *   例如 `-b:v 800k` 表示 800kbps。
    *   适用于 CBR（恒定码率）场景，但可能导致画面忽大忽小。
*   `-crf <常量质量因子>`：常量质量模式，仅适用于某些编码器（如 x264、x265）。
    *   `-crf` 值范围通常是 0 ～ 51，值越小质量越高，文件越大；常见取值范围在 18 ～ 28。
    *   推荐：H.264 使用 `-crf 23` 左右；H.265 使用 `-crf 28` 左右。

**示例**（使用常量质量模式）：

   ` ffmpeg -i input.mp4 -c:v libx264 -crf 23 -c:a copy output.mp4`

该命令使用 CRF 模式转码视频，保留原始音频。

###### 6.2.4 分辨率与帧率（`-s`、`-r`）

*   `-s <width>x<height>`：设置输出分辨率，如 `-s 1280x720` 或者标准符号 `-s hd720`、`-s pal` 等。
*   `-r <fps>`：设置帧率（帧/秒），如 `-r 30`、`-r 24` 等。

**示例**：

    ffmpeg -i input.mp4 -s 640x360 -r 25 -c:v libx264 -crf 25 output.mp4

该命令将视频分辨率改为 640×360，帧率改为 25fps，同时采用 CRF 编码。

###### 6.2.5 其他常见参数（`-ss`、`-t`、`-vf`、`-af`）

*   `-ss <时间偏移>`：跳转到指定时间位置再开始处理。可以放在输入前或输出参数前：
    *   **输入前**：`-ss 00:01:00 -i input.mp4 -c copy clip.mp4`（先跳到 1 分钟处再读取）
    *   **输出前**：`-i input.mp4 -ss 00:01:00 -c copy clip.mp4`（读取整个文件后再跳到 1 分钟位置输出）
    *   **区别**：输入前更快，但对关键帧有依赖；输出前更精确，但相对慢。
*   `-t <持续时长>`：指定持续时间，例如 `-t 00:00:30` 表示处理 30 秒。
*   `-vf <视频滤镜链>`：一系列视频滤镜，例如缩放、裁剪、水印、水平翻转等。
    *   语法：`-vf "scale=1280:720,transpose=1"`。
*   `-af <音频滤镜链>`：音频滤镜，例如扬声器环绕、音量调整、降噪等。
    *   语法：`-af "volume=1.5,atempo=0.9"`。

> **小贴士：**

*   滤镜链之间用逗号 `,` 分隔，滤镜参数使用 `=`。
*   可通过 `ffmpeg -filters` 查看所有内置滤镜列表及参数说明。
*   滤镜的处理顺序从左往右，与管道风格类似。

#### 7\. 常见使用场景示例

> 本节通过实际案例逐步演示常见操作，方便初学者上手。

##### 7.1 格式转换
